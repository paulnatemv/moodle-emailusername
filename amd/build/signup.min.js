define([],function(){"use strict";var init=function(config){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setupForm(config)}):setupForm(config)},setupForm=function(config){var usernameField=document.getElementById("id_username"),emailField=document.getElementById("id_email");if(usernameField&&emailField){var usernameGroup=usernameField.closest(".form-group, .fitem");config.hideusername?usernameGroup&&(usernameGroup.style.display="none"):(usernameField.readOnly=!0,usernameField.style.backgroundColor="#e9ecef",usernameField.style.cursor="not-allowed",usernameField.style.color="#6c757d",usernameField.setAttribute("tabindex","-1"),usernameField.placeholder=getPlaceholderText()),emailField.addEventListener("input",function(){var email=emailField.value.trim().toLowerCase();usernameField.value=email}),emailField.addEventListener("paste",function(){setTimeout(function(){var email=emailField.value.trim().toLowerCase();usernameField.value=email},10)});var form=emailField.closest("form");form&&form.addEventListener("submit",function(){var email=emailField.value.trim().toLowerCase();usernameField.value=email}),emailField.value&&(usernameField.value=emailField.value.trim().toLowerCase())}},getPlaceholderText=function(){return"‚Üê Auto-filled from email"};return{init:init}});
